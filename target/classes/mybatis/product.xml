<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="product.model.Product">
	<!-- pbest로 기준(if test) 잡고  -->
	<insert id="GetInsertProduct">
			insert into 
		<if test="pbest==0"> <!-- 0번은 의류 BEST -->
			product(pnum, pbest, pname, pcolor, psize, pprice, ppoint, pimage, pimage1, pimage2, pimage3, pcount ,pdate) 
			values(pseq.nextval,#{pbest},#{pname},#{pcolor},#{psize},#{pprice},#{ppoint},#{pimage},#{pimage1},#{pimage2},#{pimage3},#{pcount},sysdate)
		</if>
		<if test="pbest==2 or pbest==3 or pbest==4"> <!-- 2,3,4 의류 -->
			product(pnum, pbest, pname, pcolor, psize, pprice, ppoint, pimage, pimage1, pimage2, pimage3, pcount ,pdate) 
			values(pseq.nextval,#{pbest},#{pname},#{pcolor},#{psize},#{pprice},#{ppoint},#{pimage},#{pimage1},#{pimage2},#{pimage3},#{pcount},sysdate)
		</if>
		<if test="pbest==5 or pbest==1"> <!-- 1번 신발 BEST , 5번 신발 -->
			product(pnum, pbest, pname, pcolor, pssize, pprice, ppoint, pimage, pimage1, pimage2, pimage3, pcount ,pdate) 
			values(pseq.nextval,#{pbest},#{pname},#{pcolor},#{pssize},#{pprice},#{ppoint},#{pimage},#{pimage1},#{pimage2},#{pimage3},#{pcount},sysdate)
		</if>
	</insert>
	<select id="getTotalCount"  resultType="int">
		select count(*) from product
		 <if test="whatColumn=='pname'">
			where pname like #{keyword}
		</if>
		<if test="whatColumn=='pbest'">
			where pbest like #{keyword}
		</if>
		<if test="whatColumn=='pdate'">
			where pdate like #{keyword}
		</if> 
	</select>
	
	<select id="getSelectProduct" resultType="MyProduct">
		select * from product
		 <if test="whatColumn=='pname'">
			where pname like #{keyword}
		</if>
		<if test="whatColumn=='pbest'">
			where pbest like #{keyword}
		</if>
		<if test="whatColumn=='pdate'">
			where pdate like #{keyword}
		</if>
		order by pnum desc
	</select>
	<select id="getData" resultType="MyProduct">
		select * from product where pnum = #{pnum}
	</select>
	<delete id="deleteProduct">
		delete product where pnum = #{pnum}
	</delete>
	<update id="updateProduct">
		update product set pimage=#{pimage}, pimage1=#{pimage1}, pimage2=#{pimage2}, pimage3=#{pimage3}, pname=#{pname}, pbest=#{pbest}, pcolor=#{pcolor}, psize=#{psize}, pssize=#{pssize}, pprice=#{pprice}, ppoint=#{ppoint}, pcount=#{pcount} where pnum=#{pnum}
	</update>
</mapper>